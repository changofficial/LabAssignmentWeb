{"version":3,"file":"react-piano.cjs.js","sources":["../src/MidiNumbers.js","../src/Key.js","../src/Keyboard.js","../src/Piano.js","../src/KeyboardShortcuts.js"],"sourcesContent":["import range from 'lodash.range';\n\nconst SORTED_PITCHES = ['C', 'Db', 'D', 'Eb', 'E', 'F', 'Gb', 'G', 'Ab', 'A', 'Bb', 'B'];\nconst ACCIDENTAL_PITCHES = ['Db', 'Eb', 'Gb', 'Ab', 'Bb'];\nconst PITCH_INDEXES = {\n  C: 0,\n  'C#': 1,\n  Db: 1,\n  D: 2,\n  'D#': 3,\n  Eb: 3,\n  E: 4,\n  F: 5,\n  'F#': 6,\n  Gb: 6,\n  G: 7,\n  'G#': 8,\n  Ab: 8,\n  A: 9,\n  'A#': 10,\n  Bb: 10,\n  B: 11,\n};\nconst MIDI_NUMBER_C0 = 12;\nconst MIN_MIDI_NUMBER = MIDI_NUMBER_C0;\nconst MAX_MIDI_NUMBER = 127;\nconst NOTE_REGEX = /([a-g])([#b]?)(\\d+)/;\nconst NOTES_IN_OCTAVE = 12;\n\n// Converts string notes in scientific pitch notation to a MIDI number, or null.\n//\n// Example: \"c#0\" => 13, \"eb5\" => 75, \"abc\" => null\n//\n// References:\n// - http://www.flutopedia.com/octave_notation.htm\n// - https://github.com/danigb/tonal/blob/master/packages/note/index.js\nfunction fromNote(note) {\n  if (!note) {\n    throw Error('Invalid note argument');\n  }\n  const match = NOTE_REGEX.exec(note.toLowerCase());\n  if (!match) {\n    throw Error('Invalid note argument');\n  }\n  const [, letter, accidental, octave] = match;\n  const pitchName = `${letter.toUpperCase()}${accidental}`;\n  const pitchIndex = PITCH_INDEXES[pitchName];\n  if (pitchIndex == null) {\n    throw Error('Invalid note argument');\n  }\n  return MIDI_NUMBER_C0 + pitchIndex + NOTES_IN_OCTAVE * parseInt(octave, 10);\n}\n\n//\n// Build cache for getAttributes\n//\nfunction buildMidiNumberAttributes(midiNumber) {\n  const pitchIndex = (midiNumber - MIDI_NUMBER_C0) % NOTES_IN_OCTAVE;\n  const octave = Math.floor((midiNumber - MIDI_NUMBER_C0) / NOTES_IN_OCTAVE);\n  const pitchName = SORTED_PITCHES[pitchIndex];\n  return {\n    note: `${pitchName}${octave}`,\n    pitchName,\n    octave,\n    midiNumber,\n    isAccidental: ACCIDENTAL_PITCHES.includes(pitchName),\n  };\n}\n\nfunction buildMidiNumberAttributesCache() {\n  return range(MIN_MIDI_NUMBER, MAX_MIDI_NUMBER + 1).reduce((cache, midiNumber) => {\n    cache[midiNumber] = buildMidiNumberAttributes(midiNumber);\n    return cache;\n  }, {});\n}\n\nconst midiNumberAttributesCache = buildMidiNumberAttributesCache();\n\n// Returns an object containing various attributes for a given MIDI number.\n// Throws error for invalid midiNumbers.\nfunction getAttributes(midiNumber) {\n  const attrs = midiNumberAttributesCache[midiNumber];\n  if (!attrs) {\n    throw Error('Invalid MIDI number');\n  }\n  return attrs;\n}\n\n// Returns all MIDI numbers corresponding to natural notes, e.g. C and not C# or Bb.\nconst NATURAL_MIDI_NUMBERS = range(MIN_MIDI_NUMBER, MAX_MIDI_NUMBER + 1).filter(\n  (midiNumber) => !getAttributes(midiNumber).isAccidental,\n);\n\nexport default {\n  fromNote,\n  getAttributes,\n  MIN_MIDI_NUMBER,\n  MAX_MIDI_NUMBER,\n  NATURAL_MIDI_NUMBERS,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport MidiNumbers from './MidiNumbers';\n\nclass Key extends React.Component {\n  static propTypes = {\n    midiNumber: PropTypes.number.isRequired,\n    naturalKeyWidth: PropTypes.number.isRequired, // Width as a ratio between 0 and 1\n    gliss: PropTypes.bool.isRequired,\n    useTouchEvents: PropTypes.bool.isRequired,\n    accidental: PropTypes.bool.isRequired,\n    active: PropTypes.bool.isRequired,\n    disabled: PropTypes.bool.isRequired,\n    onPlayNote: PropTypes.func.isRequired,\n    onStopNote: PropTypes.func.isRequired,\n    accidentalWidthRatio: PropTypes.number.isRequired,\n    pitchPositions: PropTypes.object.isRequired,\n    children: PropTypes.node,\n  };\n\n  static defaultProps = {\n    accidentalWidthRatio: 0.65,\n    pitchPositions: {\n      C: 0,\n      Db: 0.55,\n      D: 1,\n      Eb: 1.8,\n      E: 2,\n      F: 3,\n      Gb: 3.5,\n      G: 4,\n      Ab: 4.7,\n      A: 5,\n      Bb: 5.85,\n      B: 6,\n    },\n  };\n\n  playNote = () => {\n    this.props.onPlayNote(this.props.midiNumber);\n  };\n\n  stopNote = () => {\n    this.props.onStopNote(this.props.midiNumber);\n  };\n\n  // Key position is represented by the number of natural key widths from the left\n  getAbsoluteKeyPosition(midiNumber) {\n    const OCTAVE_WIDTH = 7;\n    const { octave, pitchName } = MidiNumbers.getAttributes(midiNumber);\n    const pitchPosition = this.props.pitchPositions[pitchName];\n    const octavePosition = OCTAVE_WIDTH * octave;\n    return pitchPosition + octavePosition;\n  }\n\n  getRelativeKeyPosition(midiNumber) {\n    return (\n      this.getAbsoluteKeyPosition(midiNumber) -\n      this.getAbsoluteKeyPosition(this.props.noteRange.first)\n    );\n  }\n\n  render() {\n    const {\n      naturalKeyWidth,\n      accidentalWidthRatio,\n      midiNumber,\n      gliss,\n      useTouchEvents,\n      accidental,\n      active,\n      disabled,\n      children,\n    } = this.props;\n\n    // Need to conditionally include/exclude handlers based on useTouchEvents,\n    // because otherwise mobile taps double fire events.\n    return (\n      <div\n        className={classNames('ReactPiano__Key', {\n          'ReactPiano__Key--accidental': accidental,\n          'ReactPiano__Key--natural': !accidental,\n          'ReactPiano__Key--disabled': disabled,\n          'ReactPiano__Key--active': active,\n        })}\n        style={{\n          left: ratioToPercentage(this.getRelativeKeyPosition(midiNumber) * naturalKeyWidth),\n          width: ratioToPercentage(\n            accidental ? accidentalWidthRatio * naturalKeyWidth : naturalKeyWidth,\n          ),\n        }}\n        onMouseDown={useTouchEvents ? null : this.playNote}\n        onMouseUp={useTouchEvents ? null : this.stopNote}\n        onMouseEnter={gliss ? this.playNote : null}\n        onMouseLeave={this.stopNote}\n        onTouchStart={useTouchEvents ? this.playNote : null}\n        onTouchCancel={useTouchEvents ? this.stopNote : null}\n        onTouchEnd={useTouchEvents ? this.stopNote : null}\n      >\n        <div className=\"ReactPiano__NoteLabelContainer\">{children}</div>\n      </div>\n    );\n  }\n}\n\nfunction ratioToPercentage(ratio) {\n  return `${ratio * 100}%`;\n}\n\nexport default Key;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport range from 'lodash.range';\nimport classNames from 'classnames';\n\nimport Key from './Key';\nimport MidiNumbers from './MidiNumbers';\n\nclass Keyboard extends React.Component {\n  static propTypes = {\n    noteRange: noteRangePropType,\n    activeNotes: PropTypes.arrayOf(PropTypes.number),\n    onPlayNote: PropTypes.func.isRequired,\n    onStopNote: PropTypes.func.isRequired,\n    renderNoteLabel: PropTypes.func.isRequired,\n    keyWidthToHeight: PropTypes.number.isRequired,\n    className: PropTypes.string,\n    disabled: PropTypes.bool,\n    gliss: PropTypes.bool,\n    useTouchEvents: PropTypes.bool,\n    // If width is not provided, must have fixed width and height in parent container\n    width: PropTypes.number,\n  };\n\n  static defaultProps = {\n    disabled: false,\n    gliss: false,\n    useTouchEvents: false,\n    keyWidthToHeight: 0.25,\n    renderNoteLabel: () => {},\n  };\n\n  // Range of midi numbers on keyboard\n  getMidiNumbers() {\n    return range(this.props.noteRange.first, this.props.noteRange.last + 1);\n  }\n\n  getNaturalKeyCount() {\n    return this.getMidiNumbers().filter((number) => {\n      const { isAccidental } = MidiNumbers.getAttributes(number);\n      return !isAccidental;\n    }).length;\n  }\n\n  // Returns a ratio between 0 and 1\n  getNaturalKeyWidth() {\n    return 1 / this.getNaturalKeyCount();\n  }\n\n  getWidth() {\n    return this.props.width ? this.props.width : '100%';\n  }\n\n  getHeight() {\n    if (!this.props.width) {\n      return '100%';\n    }\n    const keyWidth = this.props.width * this.getNaturalKeyWidth();\n    return `${keyWidth / this.props.keyWidthToHeight}px`;\n  }\n\n  render() {\n    const naturalKeyWidth = this.getNaturalKeyWidth();\n    return (\n      <div\n        className={classNames('ReactPiano__Keyboard', this.props.className)}\n        style={{ width: this.getWidth(), height: this.getHeight() }}\n      >\n        {this.getMidiNumbers().map((midiNumber) => {\n          const { note, isAccidental } = MidiNumbers.getAttributes(midiNumber);\n          const isActive = this.props.activeNotes.includes(midiNumber);\n          return (\n            <Key\n              naturalKeyWidth={naturalKeyWidth}\n              midiNumber={midiNumber}\n              noteRange={this.props.noteRange}\n              active={isActive}\n              accidental={isAccidental}\n              disabled={this.props.disabled}\n              onPlayNote={this.props.onPlayNote}\n              onStopNote={this.props.onStopNote}\n              gliss={this.props.gliss}\n              useTouchEvents={this.props.useTouchEvents}\n              key={midiNumber}\n            >\n              {this.props.disabled\n                ? null\n                : this.props.renderNoteLabel({\n                    isActive,\n                    isAccidental,\n                    midiNumber,\n                  })}\n            </Key>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nfunction isNaturalMidiNumber(value) {\n  if (typeof value !== 'number') {\n    return false;\n  }\n  return MidiNumbers.NATURAL_MIDI_NUMBERS.includes(value);\n}\n\nfunction noteRangePropType(props, propName, componentName) {\n  const { first, last } = props[propName];\n  if (!first || !last) {\n    return new Error(\n      `Invalid prop ${propName} supplied to ${componentName}. ${propName} must be an object with .first and .last values.`,\n    );\n  }\n  if (!isNaturalMidiNumber(first) || !isNaturalMidiNumber(last)) {\n    return new Error(\n      `Invalid prop ${propName} supplied to ${componentName}. ${propName} values must be valid MIDI numbers, and should not be accidentals (sharp or flat notes).`,\n    );\n  }\n  if (first >= last) {\n    return new Error(\n      `Invalid prop ${propName} supplied to ${componentName}. ${propName}.first must be smaller than ${propName}.last.`,\n    );\n  }\n}\n\nexport default Keyboard;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport difference from 'lodash.difference';\nimport find from 'lodash.find';\n\nimport Keyboard from './Keyboard';\n\nclass Piano extends React.Component {\n  static propTypes = {\n    noteRange: PropTypes.object.isRequired,\n    onPlayNote: PropTypes.func.isRequired,\n    onStopNote: PropTypes.func.isRequired,\n    renderNoteLabel: PropTypes.func.isRequired,\n    className: PropTypes.string,\n    disabled: PropTypes.bool,\n    width: PropTypes.number,\n    keyWidthToHeight: PropTypes.number,\n    keyboardShortcuts: PropTypes.arrayOf(\n      PropTypes.shape({\n        key: PropTypes.string.isRequired,\n        midiNumber: PropTypes.number.isRequired,\n      }),\n    ),\n    playbackNotes: PropTypes.arrayOf(PropTypes.number.isRequired),\n  };\n\n  static defaultProps = {\n    renderNoteLabel: ({ keyboardShortcut, midiNumber, isActive, isAccidental }) =>\n      keyboardShortcut ? (\n        <div\n          className={classNames('ReactPiano__NoteLabel', {\n            'ReactPiano__NoteLabel--active': isActive,\n            'ReactPiano__NoteLabel--accidental': isAccidental,\n            'ReactPiano__NoteLabel--natural': !isAccidental,\n          })}\n        >\n          {keyboardShortcut}\n        </div>\n      ) : null,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      activeNotes: [],\n      isMouseDown: false,\n      useTouchEvents: false,\n    };\n  }\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.onKeyDown);\n    window.addEventListener('keyup', this.onKeyUp);\n    window.addEventListener('mousedown', this.onMouseDown);\n    window.addEventListener('mouseup', this.onMouseUp);\n    window.addEventListener('touchstart', this.onTouchStart);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.onKeyDown);\n    window.removeEventListener('keyup', this.onKeyUp);\n    window.removeEventListener('mousedown', this.onMouseDown);\n    window.removeEventListener('mouseup', this.onMouseUp);\n    window.removeEventListener('touchstart', this.onTouchStart);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // If keyboard shortcuts change, any activeNotes will not\n    // correctly fire keyUp events. First cancel all activeNotes.\n    if (prevProps.keyboardShortcuts !== this.props.keyboardShortcuts) {\n      this.setState({\n        activeNotes: [],\n      });\n    }\n\n    if (this.state.activeNotes !== prevState.activeNotes) {\n      this.handleNoteChanges({\n        prevActiveNotes: prevState.activeNotes || [],\n        nextActiveNotes: this.state.activeNotes || [],\n      });\n    }\n  }\n\n  handleNoteChanges = ({ prevActiveNotes, nextActiveNotes }) => {\n    const notesStarted = difference(prevActiveNotes, nextActiveNotes);\n    const notesStopped = difference(nextActiveNotes, prevActiveNotes);\n    notesStarted.forEach((midiNumber) => {\n      this.onStopNote(midiNumber);\n    });\n    notesStopped.forEach((midiNumber) => {\n      this.onPlayNote(midiNumber);\n    });\n  };\n\n  getMidiNumberForKey = (key) => {\n    if (!this.props.keyboardShortcuts) {\n      return null;\n    }\n    const shortcut = find(this.props.keyboardShortcuts, { key: key });\n    return shortcut && shortcut.midiNumber;\n  };\n\n  getKeyForMidiNumber = (midiNumber) => {\n    if (!this.props.keyboardShortcuts) {\n      return null;\n    }\n    const shortcut = find(this.props.keyboardShortcuts, { midiNumber: midiNumber });\n    return shortcut && shortcut.key;\n  };\n\n  onKeyDown = (event) => {\n    // Don't conflict with existing combinations like ctrl + t\n    if (event.ctrlKey || event.metaKey || event.shiftKey) {\n      return;\n    }\n    const midiNumber = this.getMidiNumberForKey(event.key);\n    if (midiNumber) {\n      this.onPlayNote(midiNumber);\n    }\n  };\n\n  onKeyUp = (event) => {\n    // This *should* also check for event.ctrlKey || event.metaKey || event.ShiftKey like onKeyDown does,\n    // but at least on Mac Chrome, when mashing down many alphanumeric keystrokes at once,\n    // ctrlKey is fired unexpectedly, which would cause onStopNote to NOT be fired, which causes problematic\n    // lingering notes. Since it's fairly safe to call onStopNote even when not necessary,\n    // the ctrl/meta/shift check is removed to fix that issue.\n    const midiNumber = this.getMidiNumberForKey(event.key);\n    if (midiNumber) {\n      this.onStopNote(midiNumber);\n    }\n  };\n\n  onPlayNote = (midiNumber) => {\n    if (this.props.disabled) {\n      return;\n    }\n    // Prevent duplicate note firings\n    const isActive = this.state.activeNotes.includes(midiNumber);\n    if (isActive) {\n      return;\n    }\n    // Pass in previous activeNotes for recording functionality\n    this.props.onPlayNote(midiNumber, this.state.activeNotes);\n    this.setState((prevState) => ({\n      activeNotes: prevState.activeNotes.concat(midiNumber).sort(),\n    }));\n  };\n\n  onStopNote = (midiNumber) => {\n    if (this.props.disabled) {\n      return;\n    }\n    const isInactive = !this.state.activeNotes.includes(midiNumber);\n    if (isInactive) {\n      return;\n    }\n    // Pass in previous activeNotes for recording functionality\n    this.props.onStopNote(midiNumber, this.state.activeNotes);\n    this.setState((prevState) => ({\n      activeNotes: prevState.activeNotes.filter((note) => midiNumber !== note),\n    }));\n  };\n\n  onMouseDown = () => {\n    this.setState({\n      isMouseDown: true,\n    });\n  };\n\n  onMouseUp = () => {\n    this.setState({\n      isMouseDown: false,\n    });\n  };\n\n  onTouchStart = () => {\n    this.setState({\n      useTouchEvents: true,\n    });\n  };\n\n  renderNoteLabel = ({ midiNumber, isActive, isAccidental }) => {\n    const keyboardShortcut = this.getKeyForMidiNumber(midiNumber);\n    return this.props.renderNoteLabel({ keyboardShortcut, midiNumber, isActive, isAccidental });\n  };\n\n  render() {\n    return (\n      <Keyboard\n        noteRange={this.props.noteRange}\n        onPlayNote={this.onPlayNote}\n        onStopNote={this.onStopNote}\n        activeNotes={this.props.playbackNotes || this.state.activeNotes}\n        className={this.props.className}\n        disabled={this.props.disabled}\n        width={this.props.width}\n        keyWidthToHeight={this.props.keyWidthToHeight}\n        gliss={this.state.isMouseDown}\n        useTouchEvents={this.state.useTouchEvents}\n        renderNoteLabel={this.renderNoteLabel}\n      />\n    );\n  }\n}\n\nexport default Piano;\n","import MidiNumbers from './MidiNumbers';\n\nfunction createKeyboardShortcuts({ firstNote, lastNote, keyboardConfig }) {\n  let currentMidiNumber = firstNote;\n  let naturalKeyIndex = 0;\n  let keyboardShortcuts = [];\n\n  while (\n    // There are still keys to be assigned\n    naturalKeyIndex < keyboardConfig.length &&\n    // Note to be assigned does not surpass range\n    currentMidiNumber <= lastNote\n  ) {\n    const key = keyboardConfig[naturalKeyIndex];\n    const { isAccidental } = MidiNumbers.getAttributes(currentMidiNumber);\n    if (isAccidental) {\n      keyboardShortcuts.push({\n        key: key.flat,\n        midiNumber: currentMidiNumber,\n      });\n    } else {\n      keyboardShortcuts.push({\n        key: key.natural,\n        midiNumber: currentMidiNumber,\n      });\n      naturalKeyIndex += 1;\n    }\n    currentMidiNumber += 1;\n  }\n  return keyboardShortcuts;\n}\n\nexport default {\n  create: createKeyboardShortcuts,\n  // Preset configurations\n  BOTTOM_ROW: [\n    { natural: 'z', flat: 'a', sharp: 's' },\n    { natural: 'x', flat: 's', sharp: 'd' },\n    { natural: 'c', flat: 'd', sharp: 'f' },\n    { natural: 'v', flat: 'f', sharp: 'g' },\n    { natural: 'b', flat: 'g', sharp: 'h' },\n    { natural: 'n', flat: 'h', sharp: 'j' },\n    { natural: 'm', flat: 'j', sharp: 'k' },\n    { natural: ',', flat: 'k', sharp: 'l' },\n    { natural: '.', flat: 'l', sharp: ';' },\n    { natural: '/', flat: ';', sharp: \"'\" },\n  ],\n  HOME_ROW: [\n    { natural: 'a', flat: 'q', sharp: 'w' },\n    { natural: 's', flat: 'w', sharp: 'e' },\n    { natural: 'd', flat: 'e', sharp: 'r' },\n    { natural: 'f', flat: 'r', sharp: 't' },\n    { natural: 'g', flat: 't', sharp: 'y' },\n    { natural: 'h', flat: 'y', sharp: 'u' },\n    { natural: 'j', flat: 'u', sharp: 'i' },\n    { natural: 'k', flat: 'i', sharp: 'o' },\n    { natural: 'l', flat: 'o', sharp: 'p' },\n    { natural: ';', flat: 'p', sharp: '[' },\n    { natural: \"'\", flat: '[', sharp: ']' },\n  ],\n  QWERTY_ROW: [\n    { natural: 'q', flat: '1', sharp: '2' },\n    { natural: 'w', flat: '2', sharp: '3' },\n    { natural: 'e', flat: '3', sharp: '4' },\n    { natural: 'r', flat: '4', sharp: '5' },\n    { natural: 't', flat: '5', sharp: '6' },\n    { natural: 'y', flat: '6', sharp: '7' },\n    { natural: 'u', flat: '7', sharp: '8' },\n    { natural: 'i', flat: '8', sharp: '9' },\n    { natural: 'o', flat: '9', sharp: '0' },\n    { natural: 'p', flat: '0', sharp: '-' },\n    { natural: '[', flat: '-', sharp: '=' },\n  ],\n};\n"],"names":["SORTED_PITCHES","ACCIDENTAL_PITCHES","PITCH_INDEXES","C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B","MIDI_NUMBER_C0","MIN_MIDI_NUMBER","MAX_MIDI_NUMBER","NOTE_REGEX","NOTES_IN_OCTAVE","fromNote","note","Error","match","exec","toLowerCase","letter","accidental","octave","pitchName","toUpperCase","pitchIndex","parseInt","buildMidiNumberAttributes","midiNumber","Math","floor","isAccidental","includes","buildMidiNumberAttributesCache","range","reduce","cache","midiNumberAttributesCache","getAttributes","attrs","NATURAL_MIDI_NUMBERS","filter","Key","props","onPlayNote","onStopNote","OCTAVE_WIDTH","MidiNumbers","pitchPosition","pitchPositions","octavePosition","getAbsoluteKeyPosition","noteRange","first","naturalKeyWidth","accidentalWidthRatio","gliss","useTouchEvents","active","disabled","children","classNames","left","ratioToPercentage","getRelativeKeyPosition","width","playNote","stopNote","React","Component","PropTypes","number","isRequired","bool","func","object","node","ratio","Keyboard","last","getMidiNumbers","length","getNaturalKeyCount","keyWidth","getNaturalKeyWidth","keyWidthToHeight","className","getWidth","height","getHeight","map","isActive","activeNotes","renderNoteLabel","noteRangePropType","arrayOf","string","isNaturalMidiNumber","value","propName","componentName","Piano","prevActiveNotes","nextActiveNotes","notesStarted","difference","notesStopped","forEach","key","keyboardShortcuts","shortcut","find","event","ctrlKey","metaKey","shiftKey","getMidiNumberForKey","state","setState","prevState","concat","sort","isInactive","isMouseDown","keyboardShortcut","getKeyForMidiNumber","window","addEventListener","onKeyDown","onKeyUp","onMouseDown","onMouseUp","onTouchStart","removeEventListener","prevProps","handleNoteChanges","playbackNotes","shape","createKeyboardShortcuts","firstNote","lastNote","keyboardConfig","currentMidiNumber","naturalKeyIndex","push","flat","natural","create","BOTTOM_ROW","sharp","HOME_ROW","QWERTY_ROW"],"mappings":"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"}